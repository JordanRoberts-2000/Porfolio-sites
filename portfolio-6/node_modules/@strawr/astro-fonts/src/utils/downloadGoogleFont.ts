import downloadWoff2File from './downloadWoff2File.js'

const downloadGoogleFont = async (url: string, filePath: string) => {
    const res = await fetch(url, { headers: { 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36' } });
    const text = await res.text();
    // console.log(text)
    const urlPattern = /url\(['"]?(https?:\/\/[^'"\s]+)['"]?\)/;
    const match = text.match(urlPattern);
    const googleWoffUrl = match ? match[1] : null;
    console.log("googleWoffUrl: ", googleWoffUrl);
    await downloadWoff2File(googleWoffUrl, filePath);
}

export default downloadGoogleFont