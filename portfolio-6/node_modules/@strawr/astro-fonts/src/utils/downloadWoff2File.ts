import fs from 'fs';
import { Readable } from 'stream';

async function downloadWoff2File(url, filePath) {
    const response = await fetch(url);
    if (!response.ok) {
        throw new Error(`Failed to fetch url: ${url}`);
    }
    console.log(response.ok, "response")
    const fileStream = fs.createWriteStream(filePath)
    await new Promise((resolve, reject) => {
        //@ts-ignore
        Readable.fromWeb(response.body).pipe(fileStream)
        fileStream.on('error', reject);
        fileStream.on('finish', resolve);
    });
}

export default downloadWoff2File;